from pysnmp.hlapi import *

# Define SNMP parameters
version = '2c'
community_string = 'public'
ip_address = '192.168.1.6'

OID = {
    "sys_descr_oid": ObjectIdentity('SNMPv2-MIB', 'sysDescr', 0),
    "sys_name_oid": ObjectIdentity('SNMPv2-MIB', 'sysName', 0),
    "sys_uptime": ObjectIdentity('SNMPv2-MIB', "sysUpTime", 0),
}


def snmp_request(version, community, host, oid):

    snmp_req = getCmd(
        SnmpEngine(),
        CommunityData(community),
        UdpTransportTarget((host, 161)),
        ContextData(),
        ObjectType(oid)
    )

    # Execute SNMP request and process response
    errorIndication, errorStatus, errorIndex, varBinds = next(snmp_req)
    if errorIndication:
        print(f'SNMP request failed: {errorIndication}')
    else:
        for varBind in varBinds:
            print(f'{varBind.prettyPrint()}')
            

if __name__ == "__main__":
    for key, value in OID.items():
        snmp_request(version=version, community=community_string, host=ip_address, oid=value)
            

            